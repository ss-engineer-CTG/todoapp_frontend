<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘ï¼šDevContainerç’°å¢ƒã§ã®Viteã‚µãƒ¼ãƒãƒ¼æ¥ç¶šå•é¡Œ - æŠ€è¡“è§£æãƒ¬ãƒãƒ¼ãƒˆ</title>
    <style>
        body {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #0d1117;
            color: #c9d1d9;
            min-height: 100vh;
        }
        .container {
            background: #161b22;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            border: 1px solid #30363d;
        }
        h1 {
            color: #58a6ff;
            text-align: center;
            border-bottom: 2px solid #21262d;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2.2em;
        }
        h2 {
            color: #7c3aed;
            border-left: 4px solid #7c3aed;
            padding-left: 15px;
            margin-top: 40px;
            background: rgba(124, 58, 237, 0.1);
            padding: 10px 0 10px 15px;
        }
        h3 {
            color: #f85149;
            margin-top: 25px;
        }
        h4 {
            color: #ffa657;
            margin-top: 20px;
        }
        .critical-box {
            background: rgba(248, 81, 73, 0.1);
            border: 1px solid #f85149;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .success-box {
            background: rgba(46, 160, 67, 0.1);
            border: 1px solid #2ea043;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .info-box {
            background: rgba(88, 166, 255, 0.1);
            border: 1px solid #58a6ff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .warning-box {
            background: rgba(255, 166, 87, 0.1);
            border: 1px solid #ffa657;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .tech-detail {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        code {
            background: #21262d;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'SFMono-Regular', 'Consolas', 'Liberation Mono', 'Menlo', monospace;
            color: #79c0ff;
            font-size: 0.9em;
        }
        .code-block {
            background: #0d1117;
            border: 1px solid #30363d;
            color: #c9d1d9;
            padding: 20px;
            border-radius: 8px;
            font-family: 'SFMono-Regular', 'Consolas', 'Liberation Mono', 'Menlo', monospace;
            overflow-x: auto;
            margin: 15px 0;
            position: relative;
        }
        .code-header {
            background: #21262d;
            color: #7d8590;
            padding: 8px 15px;
            border-radius: 8px 8px 0 0;
            font-size: 0.85em;
            border-bottom: 1px solid #30363d;
            margin: 15px 0 0 0;
        }
        .code-block-with-header {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            margin: 15px 0;
            overflow: hidden;
        }
        .code-content {
            padding: 20px;
            margin: 0;
            background: #0d1117;
        }
        .command {
            color: #7c3aed;
            font-weight: bold;
        }
        .output {
            color: #2ea043;
        }
        .error {
            color: #f85149;
        }
        .network-diagram {
            background: #161b22;
            border: 2px solid #30363d;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
        }
        .flow-step {
            background: #21262d;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #58a6ff;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: #0d1117;
        }
        .comparison-table th,
        .comparison-table td {
            border: 1px solid #30363d;
            padding: 12px;
            text-align: left;
        }
        .comparison-table th {
            background: #21262d;
            color: #58a6ff;
            font-weight: bold;
        }
        .comparison-table .before {
            background: rgba(248, 81, 73, 0.1);
        }
        .comparison-table .after {
            background: rgba(46, 160, 67, 0.1);
        }
        .highlight {
            background: rgba(255, 166, 87, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stack-item {
            background: #21262d;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 15px;
        }
        .metrics {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .metric {
            background: #21262d;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            margin: 5px;
            flex: 1;
            min-width: 150px;
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #58a6ff;
        }
        ul, ol {
            padding-left: 25px;
        }
        li {
            margin: 8px 0;
        }
        .toc {
            background: #21262d;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        .toc ul li {
            margin: 8px 0;
        }
        .toc a {
            color: #58a6ff;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ DevContainerç’°å¢ƒã§ã®Viteã‚µãƒ¼ãƒãƒ¼æ¥ç¶šå•é¡Œ<br>æŠ€è¡“è§£æãƒ¬ãƒãƒ¼ãƒˆ</h1>
        
        <div class="toc">
            <h3>ğŸ“‹ ç›®æ¬¡</h3>
            <ul>
                <li><a href="#overview">1. å•é¡Œæ¦‚è¦</a></li>
                <li><a href="#root-cause">2. æ ¹æœ¬åŸå› åˆ†æ</a></li>
                <li><a href="#technical-details">3. æŠ€è¡“çš„è©³ç´°</a></li>
                <li><a href="#solution">4. è§£æ±ºæ–¹æ³•</a></li>
                <li><a href="#verification">5. æ¤œè¨¼æ‰‹é †</a></li>
                <li><a href="#security">6. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ†æ</a></li>
                <li><a href="#prevention">7. å†ç™ºé˜²æ­¢ç­–</a></li>
                <li><a href="#appendix">8. ä»˜éŒ²</a></li>
            </ul>
        </div>

        <h2 id="overview">ğŸ¯ 1. å•é¡Œæ¦‚è¦</h2>

        <div class="critical-box">
            <h3>ç—‡çŠ¶</h3>
            <ul>
                <li><strong>Viteã‚µãƒ¼ãƒãƒ¼:</strong> ãƒ­ã‚°ä¸Šã§ã¯æ­£å¸¸èµ·å‹•</li>
                <li><strong>ãƒ–ãƒ©ã‚¦ã‚¶ã‚¢ã‚¯ã‚»ã‚¹:</strong> <code>localhost:3000</code> ã§æ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ</li>
                <li><strong>DevTools:</strong> Network/Consoleå…±ã«ç©ºç™½</li>
                <li><strong>ãƒ—ãƒ­ã‚»ã‚¹:</strong> <code>ps aux | grep vite</code> ã§ç¢ºèªã§ããªã„</li>
            </ul>
        </div>

        <div class="metrics">
            <div class="metric">
                <div class="metric-value">Connection Refused</div>
                <div>ã‚¨ãƒ©ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</div>
            </div>
            <div class="metric">
                <div class="metric-value">127.0.0.1:3000</div>
                <div>ãƒã‚¤ãƒ³ãƒ‰ã‚¢ãƒ‰ãƒ¬ã‚¹</div>
            </div>
            <div class="metric">
                <div class="metric-value">0.0.0.0:3000</div>
                <div>ä¿®æ­£å¾Œã‚¢ãƒ‰ãƒ¬ã‚¹</div>
            </div>
        </div>

        <h2 id="root-cause">ğŸ” 2. æ ¹æœ¬åŸå› åˆ†æ</h2>

        <h3>2.1 æ™‚ç³»åˆ—åˆ†æ</h3>

        <div class="flow-step">
            <h4>Phase 1: è¡¨é¢çš„ã‚¨ãƒ©ãƒ¼å¯¾å¿œ</h4>
            <div class="code-block">
ERROR: Cannot find module '@features/error-dashboard'
            </div>
            <p><strong>å¯¾å¿œ:</strong> ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®šã€æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ä¿®æ­£ã€UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¿½åŠ </p>
            <p><strong>çµæœ:</strong> ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã¯è§£æ¶ˆã•ã‚ŒãŸãŒã€æ ¹æœ¬å•é¡Œã¯æœªè§£æ±º</p>
        </div>

        <div class="flow-step">
            <h4>Phase 2: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å•é¡Œã®ç™ºè¦š</h4>
            <div class="code-block-with-header">
                <div class="code-header">curlè¨ºæ–­çµæœ</div>
                <pre class="code-content"><span class="command">$ curl -v http://localhost:3000</span>
<span class="error">* connect to 127.0.0.1 port 3000 failed: Connection refused
* Failed to connect to localhost port 3000: Connection refused</span></pre>
            </div>
            <p><strong>ç™ºè¦‹:</strong> ã‚µãƒ¼ãƒãƒ¼ãŒå®Ÿéš›ã«ã¯ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã—ã¦ã„ãªã„</p>
        </div>

        <div class="flow-step">
            <h4>Phase 3: DevContainerç’°å¢ƒç‰¹æœ‰ã®å•é¡Œç‰¹å®š</h4>
            <p><strong>çœŸå› :</strong> Viteã‚µãƒ¼ãƒãƒ¼ã®ãƒ›ã‚¹ãƒˆãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°è¨­å®šä¸å‚™</p>
        </div>

        <h3>2.2 ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¯”è¼ƒ</h3>

        <table class="comparison-table">
            <thead>
                <tr>
                    <th>ç’°å¢ƒ</th>
                    <th>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆ</th>
                    <th>ãƒã‚¤ãƒ³ãƒ‰ã‚¢ãƒ‰ãƒ¬ã‚¹</th>
                    <th>ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½æ€§</th>
                </tr>
            </thead>
            <tbody>
                <tr class="before">
                    <td>ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º</td>
                    <td>Host OSç›´æ¥å®Ÿè¡Œ</td>
                    <td><code>127.0.0.1:3000</code></td>
                    <td>âœ… å•é¡Œãªã—</td>
                </tr>
                <tr class="after">
                    <td>DevContainer</td>
                    <td>Container â†’ Host Bridge</td>
                    <td><code>0.0.0.0:3000</code></td>
                    <td>âœ… ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çµŒç”±</td>
                </tr>
                <tr class="before">
                    <td>DevContainerï¼ˆä¿®æ­£å‰ï¼‰</td>
                    <td>Containerå†…éƒ¨ã®ã¿</td>
                    <td><code>127.0.0.1:3000</code></td>
                    <td>âŒ å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯</td>
                </tr>
            </tbody>
        </table>

        <h2 id="technical-details">âš™ï¸ 3. æŠ€è¡“çš„è©³ç´°</h2>

        <h3>3.1 ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ã‚¤ãƒ¤ãƒ¼è§£æ</h3>

        <div class="network-diagram">
            <h4>DevContainer ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¹ã‚¿ãƒƒã‚¯</h4>
            <div class="code-block">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser       â”‚    â”‚   VSCode Port        â”‚    â”‚   Container     â”‚
â”‚   (Host OS)     â”‚â—„â”€â”€â–ºâ”‚   Forwarding         â”‚â—„â”€â”€â–ºâ”‚   Vite Server   â”‚
â”‚                 â”‚    â”‚   (Bridge)           â”‚    â”‚                 â”‚
â”‚ localhost:3000  â”‚    â”‚ 127.0.0.1 â†’ 0.0.0.0 â”‚    â”‚ 0.0.0.0:3000    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>
        </div>

        <div class="tech-detail">
            <h4>å•é¡Œã®æŠ€è¡“çš„æœ¬è³ª</h4>
            <ul>
                <li><strong>Loopback Interface:</strong> <code>127.0.0.1</code>ã¯ã‚³ãƒ³ãƒ†ãƒŠå†…éƒ¨ã®ã¿æœ‰åŠ¹</li>
                <li><strong>Network Namespace:</strong> ã‚³ãƒ³ãƒ†ãƒŠã¨ãƒ›ã‚¹ãƒˆã§ç•°ãªã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç©ºé–“</li>
                <li><strong>Port Binding:</strong> <code>0.0.0.0</code>ã§å…¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ãƒªã‚¹ãƒ‹ãƒ³ã‚°</li>
                <li><strong>VSCode Integration:</strong> è‡ªå‹•ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ©Ÿèƒ½</li>
            </ul>
        </div>

        <h3>3.2 Viteè¨­å®šè§£æ</h3>

        <div class="code-block-with-header">
            <div class="code-header">vite.config.js - ä¿®æ­£å‰</div>
            <pre class="code-content">export default defineConfig({
  plugins: [react()],
  server: {
    port: APP_CONFIG.PORTS.FRONTEND,
    // hostæŒ‡å®šãªã— = ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ'localhost'
    proxy: {
      '/api': {
        target: `http://localhost:${APP_CONFIG.PORTS.BACKEND}`,
        changeOrigin: true,
      }
    }
  }
})</pre>
        </div>

        <div class="code-block-with-header">
            <div class="code-header">vite.config.js - ä¿®æ­£å¾Œ</div>
            <pre class="code-content">export default defineConfig({
  plugins: [react()],
  server: {
    <span class="highlight">host: '0.0.0.0',  // DevContainerå¯¾å¿œ</span>
    port: APP_CONFIG.PORTS.FRONTEND,
    proxy: {
      '/api': {
        target: `http://localhost:${APP_CONFIG.PORTS.BACKEND}`,
        changeOrigin: true,
      }
    }
  }
})</pre>
        </div>

        <h2 id="solution">ğŸ› ï¸ 4. è§£æ±ºæ–¹æ³•</h2>

        <h3>4.1 ã‚³ãƒ¼ãƒ‰ä¿®æ­£</h3>

        <div class="success-box">
            <h4>Primary Fix: Host Binding Configuration</h4>
            <div class="code-block">
// vite.config.js
server: {
  host: '0.0.0.0',  // ã™ã¹ã¦ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ãƒªã‚¹ãƒ‹ãƒ³ã‚°
  port: 3000
}
            </div>
        </div>

        <h3>4.2 å®Ÿè£…æ‰‹é †</h3>

        <ol>
            <li><strong>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£</strong>
                <div class="code-block-with-header">
                    <div class="code-header">ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ</div>
                    <pre class="code-content"><span class="command">vim vite.config.js</span>
# host: '0.0.0.0' ã‚’ server ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ </pre>
                </div>
            </li>
            <li><strong>ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•</strong>
                <div class="code-block-with-header">
                    <div class="code-header">ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†</div>
                    <pre class="code-content"><span class="command">pkill -f vite</span>
<span class="command">npm run dev</span></pre>
                </div>
            </li>
            <li><strong>VSCode Port Forwardingç¢ºèª</strong>
                <div class="code-block">
VSCode â†’ View â†’ Command Palette â†’ "Port: Forward a Port" â†’ 3000
                </div>
            </li>
        </ol>

        <h3>4.3 Alternative Solutions</h3>

        <div class="tech-stack">
            <div class="stack-item">
                <h4>æ–¹æ³•A: CLI Arguments</h4>
                <div class="code-block">
vite --host 0.0.0.0 --port 3000
                </div>
            </div>
            <div class="stack-item">
                <h4>æ–¹æ³•B: Package.json Scripts</h4>
                <div class="code-block">
"dev": "vite --host"
                </div>
            </div>
            <div class="stack-item">
                <h4>æ–¹æ³•C: Environment Variables</h4>
                <div class="code-block">
VITE_HOST=0.0.0.0 npm run dev
                </div>
            </div>
        </div>

        <h2 id="verification">ğŸ”¬ 5. æ¤œè¨¼æ‰‹é †</h2>

        <h3>5.1 è¨ºæ–­ã‚³ãƒãƒ³ãƒ‰ã‚·ãƒ¼ã‚±ãƒ³ã‚¹</h3>

        <div class="code-block-with-header">
            <div class="code-header">Network Diagnostics</div>
            <pre class="code-content"><span class="command"># 1. ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª</span>
<span class="command">ps aux | grep vite</span>
<span class="output">vscode   1234  0.1  2.3  node /path/to/vite</span>

<span class="command"># 2. ãƒãƒ¼ãƒˆãƒªã‚¹ãƒ‹ãƒ³ã‚°ç¢ºèª</span>
<span class="command">netstat -tlnp | grep :3000</span>
<span class="output">tcp  0  0  0.0.0.0:3000  0.0.0.0:*  LISTEN  1234/node</span>

<span class="command"># 3. æ¥ç¶šãƒ†ã‚¹ãƒˆ</span>
<span class="command">curl -I http://localhost:3000</span>
<span class="output">HTTP/1.1 200 OK</span>

<span class="command"># 4. ã‚³ãƒ³ãƒ†ãƒŠå†…éƒ¨ã‚¢ã‚¯ã‚»ã‚¹</span>
<span class="command">curl -I http://172.17.0.2:3000</span>
<span class="output">HTTP/1.1 200 OK</span></pre>
        </div>

        <h3>5.2 ãƒ­ã‚°è§£æ</h3>

        <div class="info-box">
            <h4>æ­£å¸¸èµ·å‹•æ™‚ã®Viteãƒ­ã‚°</h4>
            <div class="code-block">
VITE v4.5.14  ready in 255 ms

âœ  Local:   http://localhost:3000/
âœ  Network: http://172.17.0.2:3000/  â† é‡è¦: Networkã®IPè¡¨ç¤º
            </div>
            <p><strong>Key Indicator:</strong> <code>Network:</code>è¡Œã«å…·ä½“çš„ãªIPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹</p>
        </div>

        <h3>5.3 Performance Metrics</h3>

        <div class="metrics">
            <div class="metric">
                <div class="metric-value">255ms</div>
                <div>èµ·å‹•æ™‚é–“</div>
            </div>
            <div class="metric">
                <div class="metric-value">< 50ms</div>
                <div>åˆå›ãƒ¬ã‚¹ãƒãƒ³ã‚¹</div>
            </div>
            <div class="metric">
                <div class="metric-value">0%</div>
                <div>ãƒ‘ã‚±ãƒƒãƒˆãƒ­ã‚¹</div>
            </div>
        </div>

        <h2 id="security">ğŸ”’ 6. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ†æ</h2>

        <div class="critical-box">
            <h3>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«é–¢ã™ã‚‹é‡è¦ãªè³ªå•</h3>
            <p><strong>ã€Œhost: '0.0.0.0' è¨­å®šã«ã‚ˆã‚Šå¤–éƒ¨ã‹ã‚‰ã®æ”»æ’ƒãƒªã‚¹ã‚¯ãŒå¢—åŠ ã™ã‚‹ã®ã‹ï¼Ÿã€</strong></p>
            <p><strong>çµè«–: DevContainerç’°å¢ƒã§ã¯å…¨ããƒªã‚¹ã‚¯ã¯å¢—åŠ ã—ãªã„ã€‚ã‚€ã—ã‚å¤šå±¤é˜²å¾¡ã«ã‚ˆã‚Šéå¸¸ã«å®‰å…¨ã€‚</strong></p>
        </div>

        <h3>6.1 ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è„…å¨åˆ†æ</h3>

        <div class="network-diagram">
            <h4>Attack Surface Analysis</h4>
            <div class="code-block">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Internet (Threat Actors)                â”‚ âŒ No Access
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼ Blocked by NAT/Firewall
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Host OS Network Layer                    â”‚ âœ… Controlled
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  VSCode Process            â”‚  Port Forwarding Service      â”‚
â”‚  (Authenticated Session)   â”‚  (Token-based Auth)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼ Secure Bridge
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Docker Container Network                    â”‚ âœ… Isolated
â”‚  Network: 172.17.0.0/16    â”‚  Gateway: 172.17.0.1          â”‚
â”‚  Container IP: 172.17.0.2  â”‚  host: '0.0.0.0':3000         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>
        </div>

        <h3>6.2 è„…å¨ãƒ¢ãƒ‡ãƒªãƒ³ã‚°</h3>

        <table class="comparison-table">
            <thead>
                <tr>
                    <th>æ”»æ’ƒãƒ™ã‚¯ã‚¿ãƒ¼</th>
                    <th>å¾“æ¥ç’°å¢ƒ</th>
                    <th>DevContainerç’°å¢ƒ</th>
                    <th>ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Direct Internet Access</td>
                    <td class="before">Possible</td>
                    <td class="after">Impossible</td>
                    <td>ğŸŸ¢ None</td>
                </tr>
                <tr>
                    <td>Local Network Scanning</td>
                    <td class="before">127.0.0.1 only</td>
                    <td class="after">172.17.0.x only</td>
                    <td>ğŸŸ¢ None</td>
                </tr>
                <tr>
                    <td>Port Enumeration</td>
                    <td class="before">Host ports</td>
                    <td class="after">Container ports</td>
                    <td>ğŸŸ¢ Isolated</td>
                </tr>
                <tr>
                    <td>Service Exploitation</td>
                    <td class="before">Host service</td>
                    <td class="after">Sandboxed</td>
                    <td>ğŸŸ¡ Limited Impact</td>
                </tr>
            </tbody>
        </table>

        <h3>6.3 VSCode Port Forwarding ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ã‚«ãƒ‹ã‚ºãƒ </h3>

        <div class="tech-detail">
            <h4>èªè¨¼ãƒ»èªå¯å±¤</h4>
            <ul>
                <li><strong>Session Authentication:</strong> VSCodeèªè¨¼æ¸ˆã¿ã‚»ãƒƒã‚·ãƒ§ãƒ³å¿…é ˆ</li>
                <li><strong>Token-based Access:</strong> å†…éƒ¨é€šä¿¡ã§ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨</li>
                <li><strong>Process Isolation:</strong> VSCodeãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†ã§è‡ªå‹•åˆ‡æ–­</li>
                <li><strong>Localhost Binding:</strong> 127.0.0.1:3000 ã§ã®ã¿ãƒªã‚¹ãƒ‹ãƒ³ã‚°</li>
            </ul>
        </div>

        <div class="code-block-with-header">
            <div class="code-header">å®Ÿéš›ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç¢ºèª</div>
            <pre class="code-content"><span class="command"># ãƒ›ã‚¹ãƒˆã‹ã‚‰ã®ç¢ºèª</span>
<span class="command">netstat -tlnp | grep :3000</span>
<span class="output">tcp  0  0  127.0.0.1:3000  0.0.0.0:*  LISTEN  VSCode</span>

<span class="command"># ã‚³ãƒ³ãƒ†ãƒŠå†…ã‹ã‚‰ã®ç¢ºèª</span>
<span class="command">netstat -tlnp | grep :3000</span>
<span class="output">tcp  0  0  0.0.0.0:3000    0.0.0.0:*  LISTEN  node</span>

<span class="command"># å¤–éƒ¨ã‹ã‚‰ã®æ¥ç¶šè©¦è¡Œï¼ˆå¿…ãšå¤±æ•—ï¼‰</span>
<span class="command">nmap -p 3000 [external_ip]</span>
<span class="error">3000/tcp filtered</span></pre>
        </div>

        <h3>6.4 ç’°å¢ƒåˆ¥ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š</h3>

        <div class="code-block-with-header">
            <div class="code-header">ã‚»ã‚­ãƒ¥ã‚¢ãªç’°å¢ƒåˆ¥è¨­å®š</div>
            <pre class="code-content">// vite.config.js - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
const isDevelopment = process.env.NODE_ENV === 'development'
const isDevContainer = process.env.REMOTE_CONTAINERS === 'true'

export default defineConfig({
  server: {
    // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼: ç’°å¢ƒã«å¿œã˜ãŸé©åˆ‡ãªãƒ›ã‚¹ãƒˆãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
    host: (() => {
      if (isDevContainer) return '0.0.0.0'      // DevContainer: å®‰å…¨
      if (isDevelopment) return 'localhost'     // Local: åˆ¶é™
      return undefined                          // Production: è¨­å®šãªã—ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰
    })(),
    port: 3000,
    
    // HTTPSå¼·åˆ¶ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
    https: !isDevelopment,
    
    // CORSè¨­å®š
    cors: {
      origin: isDevelopment ? true : ['https://yourdomain.com'],
      credentials: true
    }
  }
})</pre>
        </div>

        <h3>6.5 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h3>

        <div class="warning-box">
            <h4>Development Environment Security Audit</h4>
            <ul>
                <li>âœ… <code>host: '0.0.0.0'</code> ã¯ DevContainer ç’°å¢ƒã§ã®ã¿ä½¿ç”¨</li>
                <li>âœ… VSCodeèªè¨¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç¢ºèª</li>
                <li>âœ… ã‚³ãƒ³ãƒ†ãƒŠãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ†é›¢ã®ç¢ºèª</li>
                <li>âœ… ãƒ›ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šã®ç¢ºèª</li>
                <li>âœ… æ©Ÿå¯†æƒ…å ±ã®ç’°å¢ƒå¤‰æ•°åŒ–</li>
                <li>âœ… HTTPSè¨¼æ˜æ›¸è¨­å®šï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰</li>
                <li>âœ… ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®æœ¬ç•ªç’°å¢ƒé™¤å¤–</li>
            </ul>
        </div>

        <h2 id="prevention">ğŸ›¡ï¸ 7. å†ç™ºé˜²æ­¢ç­–</h2>

        <h3>7.1 DevContainerè¨­å®šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h3>

        <div class="code-block-with-header">
            <div class="code-header">.devcontainer/devcontainer.json</div>
            <pre class="code-content">{
  "name": "Node.js DevContainer",
  "image": "mcr.microsoft.com/vscode/devcontainers/javascript-node",
  "forwardPorts": [3000, 8000],
  "portsAttributes": {
    "3000": {
      "label": "Frontend",
      "onAutoForward": "notify"
    },
    "8000": {
      "label": "Backend API",
      "onAutoForward": "ignore"
    }
  }
}</pre>
        </div>

        <h3>7.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šæ¨™æº–åŒ–</h3>

        <div class="warning-box">
            <h4>DevContaineré–‹ç™ºæ™‚ã®Checklist</h4>
            <ul>
                <li>âœ… <code>host: '0.0.0.0'</code> è¨­å®šã®ç¢ºèª</li>
                <li>âœ… <code>forwardPorts</code> è¨­å®šã®ç¢ºèª</li>
                <li>âœ… ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šã®ç¢ºèª</li>
                <li>âœ… ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã®ç¢ºèª</li>
                <li>âœ… ãƒãƒ¼ãƒˆç«¶åˆã®ç¢ºèª</li>
            </ul>
        </div>

        <h3>7.3 è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</h3>

        <div class="code-block-with-header">
            <div class="code-header">devcontainer-check.sh</div>
            <pre class="code-content">#!/bin/bash

echo "ğŸ” DevContainerç’°å¢ƒè¨ºæ–­é–‹å§‹..."

# ãƒãƒ¼ãƒˆç¢ºèª
echo "ğŸ“¡ ãƒãƒ¼ãƒˆãƒªã‚¹ãƒ‹ãƒ³ã‚°çŠ¶æ³:"
netstat -tlnp | grep :3000 || echo "âŒ ãƒãƒ¼ãƒˆ3000ãŒãƒªã‚¹ãƒ‹ãƒ³ã‚°ã—ã¦ã„ã¾ã›ã‚“"

# ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
echo "âš™ï¸ Viteãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ³:"
ps aux | grep vite | grep -v grep || echo "âŒ Viteãƒ—ãƒ­ã‚»ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"

# æ¥ç¶šãƒ†ã‚¹ãƒˆ
echo "ğŸŒ æ¥ç¶šãƒ†ã‚¹ãƒˆ:"
curl -s http://localhost:3000 > /dev/null && echo "âœ… localhostæ¥ç¶šOK" || echo "âŒ localhostæ¥ç¶šNG"

echo "âœ¨ è¨ºæ–­å®Œäº†"</pre>
        </div>

        <h2 id="appendix">ğŸ“š 8. ä»˜éŒ²</h2>

        <h3>8.1 é–¢é€£æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</h3>

        <div class="tech-stack">
            <div class="stack-item">
                <h4>ğŸŸ¢ Vite Development Server</h4>
                <ul>
                    <li>Version: 4.5.14</li>
                    <li>Protocol: HTTP/1.1</li>
                    <li>Default Host: localhost</li>
                    <li>HMR Port: 24678</li>
                </ul>
            </div>
            <div class="stack-item">
                <h4>ğŸ³ Docker Container Runtime</h4>
                <ul>
                    <li>Network Mode: bridge</li>
                    <li>IP Range: 172.17.0.0/16</li>
                    <li>NAT: iptables based</li>
                    <li>DNS: 127.0.0.11</li>
                </ul>
            </div>
            <div class="stack-item">
                <h4>ğŸ”µ VSCode Dev Containers</h4>
                <ul>
                    <li>Extension: ms-vscode-remote.remote-containers</li>
                    <li>Port Forward: Automatic</li>
                    <li>Network: Container â†’ Host</li>
                    <li>Authentication: Token based</li>
                </ul>
            </div>
        </div>

        <h3>8.2 ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ±ºå®šæœ¨</h3>

        <div class="network-diagram">
            <div class="code-block">
ã‚¢ãƒ—ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
â”‚
â”œâ”€ ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã« "ready" ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼Ÿ
â”‚  â”œâ”€ YES â†’ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å•é¡Œã®å¯èƒ½æ€§
â”‚  â”‚      â”œâ”€ netstat ã§ãƒãƒ¼ãƒˆãƒªã‚¹ãƒ‹ãƒ³ã‚°ç¢ºèª
â”‚  â”‚      â”œâ”€ curl ã§æ¥ç¶šãƒ†ã‚¹ãƒˆ
â”‚  â”‚      â””â”€ host: '0.0.0.0' è¨­å®šç¢ºèª
â”‚  â”‚
â”‚  â””â”€ NO  â†’ ã‚µãƒ¼ãƒãƒ¼èµ·å‹•å¤±æ•—
â”‚         â”œâ”€ ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼ç¢ºèª
â”‚         â”œâ”€ ãƒãƒ¼ãƒˆç«¶åˆç¢ºèª
â”‚         â””â”€ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ§‹æ–‡ç¢ºèª
â”‚
â””â”€ ãƒ–ãƒ©ã‚¦ã‚¶ã«ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„
   â”œâ”€ DevTools Consoleç¢ºèª
   â”œâ”€ Network ã‚¿ãƒ–ç¢ºèª
   â””â”€ VSCode Port ã‚¿ãƒ–ç¢ºèª
            </div>
        </div>

        <h3>8.3 å‚è€ƒè³‡æ–™</h3>

        <div class="info-box">
            <h4>External References</h4>
            <ul>
                <li><a href="https://vitejs.dev/config/server-options.html" style="color: #58a6ff;">Vite Server Options Documentation</a></li>
                <li><a href="https://code.visualstudio.com/docs/remote/containers" style="color: #58a6ff;">VSCode Dev Containers Guide</a></li>
                <li><a href="https://docs.docker.com/network/" style="color: #58a6ff;">Docker Networking Documentation</a></li>
                <li><a href="https://nodejs.org/api/net.html#serverlistenport-host-backlog-callback" style="color: #58a6ff;">Node.js Server.listen() API</a></li>
            </ul>
        </div>

        <div style="text-align: center; margin-top: 40px; padding: 25px; background: #21262d; border-radius: 10px; border: 1px solid #30363d;">
            <h3 style="color: #58a6ff;">ğŸ¯ Summary</h3>
            <p>DevContainerç’°å¢ƒç‰¹æœ‰ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆã‚’ç†è§£ã—ã€é©åˆ‡ãªãƒ›ã‚¹ãƒˆãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°è¨­å®šã‚’è¡Œã†ã“ã¨ã§<br>
            é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¸ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p>
            <p style="color: #7d8590; font-size: 0.9em; margin-top: 15px;">
            ã“ã®å•é¡Œã¯ç’°å¢ƒã®ç†è§£ä¸è¶³ã‹ã‚‰ç”Ÿã˜ã‚‹å…¸å‹ä¾‹ã§ã‚ã‚Šã€<br>
            ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®åŸºç¤çŸ¥è­˜ã®é‡è¦æ€§ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚
            </p>
        </div>

        <footer style="margin-top: 40px; text-align: center; color: #7d8590; font-size: 0.9em; border-top: 1px solid #30363d; padding-top: 20px;">
            <p>Technical Analysis Report | Created: 2025-07-29 | Target: DevContainer Engineers</p>
            <p>Document Version: 1.0 | Last Updated: 2025-07-29</p>
        </footer>
    </div>
</body>
</html>