@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;
  --primary: 222.2 47.4% 11.2%;
  --primary-foreground: 210 40% 98%;
  --secondary: 210 40% 96%;
  --secondary-foreground: 222.2 84% 4.9%;
  --muted: 210 40% 96%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --accent: 210 40% 96%;
  --accent-foreground: 222.2 84% 4.9%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 222.2 84% 4.9%;
  --radius: 0.5rem;
  --focus-ring: 222.2 84% 4.9%;
  --focus-bg: 210 40% 96%;
}

.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --popover: 222.2 84% 4.9%;
  --popover-foreground: 210 40% 98%;
  --primary: 210 40% 98%;
  --primary-foreground: 222.2 47.4% 11.2%;
  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 210 40% 98%;
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  --accent: 217.2 32.6% 17.5%;
  --accent-foreground: 210 40% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 210 40% 98%;
  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --ring: 212.7 26.8% 83.9%;
  --focus-ring: 212.7 26.8% 83.9%;
  --focus-bg: 217.2 32.6% 17.5%;
}

* {
  border-color: hsl(var(--border));
}

body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  font-family: 'Inter', sans-serif;
}

/* ===== ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆç”¨ã‚¹ã‚¿ã‚¤ãƒ« ===== */

/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ */
.task-item {
  transition: all 0.2s ease-in-out;
}

.task-item:hover {
  background-color: hsl(var(--accent));
}

.task-item.selected {
  background-color: hsl(var(--accent));
  border-left: 3px solid hsl(var(--primary));
}

.project-item {
  transition: all 0.2s ease-in-out;
}

.project-item:hover {
  background-color: hsl(var(--accent));
}

.project-item.selected {
  background-color: hsl(var(--accent));
  border-left: 3px solid hsl(var(--primary));
}

/* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--background));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground));
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--foreground));
}

/* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†å¼·åŒ– */
.focus-visible:focus-visible {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¨ãƒªã‚¢ã®è¦–è¦šçš„å¼·èª¿ */
.area-active {
  background-color: hsl(var(--focus-bg) / 0.4);
  ring: 1px solid hsl(var(--focus-ring) / 0.2);
}

/* ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½ã‚¨ãƒªã‚¢ã®æ˜ç¢ºåŒ– */
.keyboard-focus-area:focus-within {
  background-color: hsl(var(--focus-bg) / 0.3);
  outline: 1px solid hsl(var(--focus-ring) / 0.3);
  outline-offset: -1px;
}

/* è¤‡æ•°é¸æŠæ™‚ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ */
.multi-select-highlight {
  background-color: hsl(var(--accent) / 0.8);
  border: 1px solid hsl(var(--primary));
}

/* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½ãƒ‘ãƒãƒ«ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ */
.panel-focusable {
  transition: background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.panel-focusable:focus {
  background-color: hsl(var(--focus-bg) / 0.2);
  outline: none;
  box-shadow: inset 0 0 0 1px hsl(var(--focus-ring) / 0.3);
}

.panel-focusable:focus-visible {
  background-color: hsl(var(--focus-bg) / 0.4);
  box-shadow: inset 0 0 0 2px hsl(var(--focus-ring) / 0.5);
}

/* æ“ä½œå¯èƒ½çŠ¶æ…‹ã®æ˜ç¢ºåŒ– */
.interactive-ready {
  cursor: pointer;
  transition: all 0.15s ease-in-out;
}

.interactive-ready:hover {
  background-color: hsl(var(--accent) / 0.6);
}

.interactive-ready:focus {
  background-color: hsl(var(--focus-bg) / 0.8);
  outline: 2px solid hsl(var(--focus-ring));
  outline-offset: 1px;
}

/* ã‚¿ã‚¹ã‚¯å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ« */
.task-input-field {
  transition: border-color 0.2s ease-in-out, background-color 0.2s ease-in-out;
}

.task-input-field:focus {
  border-color: hsl(var(--ring));
  background-color: hsl(var(--background));
}

.task-input-field.has-changes {
  border-color: hsl(24 95% 53%); /* orange-500 equivalent */
}

.task-input-field.has-error {
  border-color: hsl(0 84% 60%); /* red-500 equivalent */
  background-color: hsl(0 93% 94% / 0.5); /* red-50 equivalent with transparency */
}

.dark .task-input-field.has-error {
  background-color: hsl(0 63% 31% / 0.2); /* red-950 equivalent with transparency */
}

/* ===== Timelineçµ±åˆã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆä¿®æ­£ç‰ˆï¼‰ ===== */

/* ğŸ”§ ä¿®æ­£ï¼šTimelineæç”»ã‚³ãƒ³ãƒ†ãƒŠã®å¹…å•é¡Œè§£æ±º */
.timeline-renderer-container {
  position: relative;
  overflow: visible;
}

/* ğŸ”§ ä¿®æ­£ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã®å¹…ç¢ºä¿ */
.project-header-row {
  position: relative;
  overflow: visible;
  box-sizing: border-box;
}

/* ğŸ”§ ä¿®æ­£ï¼šTimelineæ—¥ä»˜ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åŒæœŸ */
.timeline-date-header {
  overflow-x: hidden !important;
  scrollbar-width: none;
  -ms-overflow-style: none;
  position: relative;
}

.timeline-date-header::-webkit-scrollbar {
  display: none;
}

/* ğŸ”§ ä¿®æ­£ï¼šTimelineã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ã®å¹…ç®¡ç† */
.timeline-content {
  position: relative;
  min-width: 100%;
  overflow-x: auto;
  overflow-y: auto;
}

/* Timelineã‚¿ã‚¹ã‚¯ãƒãƒ¼ */
.timeline-task-bar {
  transition: all 0.2s ease-in-out;
  box-sizing: border-box;
}

.timeline-task-bar:hover {
  transform: scale(1.02);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 3;
}

/* Timelineæ¥ç¶šç·š */
.timeline-connection-line {
  opacity: 0.7;
  border-radius: 2px;
  background: linear-gradient(to right, #9ca3af, #d1d5db);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.timeline-connection-point {
  border-radius: 50%;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  border: 1px solid white;
}

.dark .timeline-connection-point {
  border-color: hsl(var(--gray-800));
}

/* Timelineä»Šæ—¥ã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ */
.timeline-today-indicator {
  background-color: #ef4444; /* red-500 */
  box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3);
}

.timeline-today-marker {
  background-color: #ef4444; /* red-500 */
  border-radius: 50%;
  box-shadow: 
    0 2px 8px rgba(239, 68, 68, 0.4),
    0 0 0 2px white;
  display: flex;
  align-items: center;
  justify-content: center;
}

.dark .timeline-today-marker {
  box-shadow: 
    0 2px 8px rgba(239, 68, 68, 0.4),
    0 0 0 2px hsl(var(--gray-900));
}

/* Timelineå±•é–‹åˆ¶å¾¡ãƒœã‚¿ãƒ³ */
.timeline-expand-control {
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.timeline-expand-control:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.timeline-expand-control:active {
  transform: scale(0.95);
}

/* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œã®ã‚¹ãƒ ãƒ¼ã‚ºãªåˆ‡ã‚Šæ›¿ãˆ */
html {
  color-scheme: light;
}

html.dark {
  color-scheme: dark;
}

/* ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .timeline-task-bar:hover,
  .task-item,
  .project-item,
  .timeline-expand-control:hover {
    transform: none !important;
  }
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ */
@media (max-width: 768px) {
  .desktop-only {
    display: none;
  }
  
  .timeline-date-header {
    font-size: 0.875rem;
  }
  
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  /* ğŸ”§ ä¿®æ­£ï¼šãƒ¢ãƒã‚¤ãƒ«ã§ã®Timelineè¡¨ç¤ºæœ€é©åŒ– */
  .timeline-renderer-container {
    min-width: 100vw;
  }
  
  .project-header-row {
    min-width: 100vw;
  }
}

@media (min-width: 769px) {
  .mobile-only {
    display: none;
  }
}

/* ãƒ—ãƒªãƒ³ãƒˆå¯¾å¿œ */
@media print {
  .no-print {
    display: none !important;
  }
  
  body {
    background: white !important;
    color: black !important;
  }
  
  .timeline-task-bar:hover,
  .timeline-expand-control:hover {
    transform: none;
    box-shadow: none;
  }
}

/* ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ */
@media (prefers-contrast: high) {
  :root {
    --border: 0 0% 0%;
    --input: 0 0% 0%;
    --focus-ring: 0 0% 0%;
  }
  
  .dark {
    --border: 0 0% 100%;
    --input: 0 0% 100%;
    --focus-ring: 0 0% 100%;
  }
  
  .timeline-connection-line,
  .timeline-task-bar {
    border-width: 2px !important;
  }
  
  .timeline-today-indicator {
    box-shadow: 0 0 0 2px black;
  }
}

/* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ï¼ˆTimelineå¯¾å¿œï¼‰ */
.timeline-task-bar:focus,
.timeline-expand-control:focus {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* Timelineè¡Œã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹çŠ¶æ…‹ */
.timeline-project-row:focus-within,
.timeline-task-row:focus-within {
  background-color: hsl(var(--accent) / 0.1);
}

/* Timelineè¡¨ç¤ºå¯†åº¦å¯¾å¿œ */
.timeline-compact .timeline-task-bar {
  font-size: 0.875rem;
}

.timeline-minimal .timeline-task-bar {
  font-size: 0.75rem;
}

/* TimelineèƒŒæ™¯ã‚°ãƒªãƒƒãƒ‰ */
.timeline-grid-cell {
  transition: background-color 0.2s ease-in-out;
}

.timeline-grid-cell.weekend {
  background-color: hsl(var(--muted) / 0.3);
}

.timeline-grid-cell.today {
  background-color: hsl(var(--destructive) / 0.1);
  border-color: hsl(var(--destructive));
}

/* Timelineéšå±¤ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ */
.timeline-indent-1 { padding-left: 2rem; }
.timeline-indent-2 { padding-left: 4rem; }
.timeline-indent-3 { padding-left: 6rem; }
.timeline-indent-4 { padding-left: 8rem; }
.timeline-indent-5 { padding-left: 10rem; }

/* ğŸ”§ æ–°è¦è¿½åŠ ï¼šTimelineå¹…ç®¡ç†ã®å¼·åŒ– */
.timeline-full-width {
  width: 100%;
  min-width: 100%;
  box-sizing: border-box;
}

.timeline-project-background {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 0;
}

.timeline-project-content {
  position: relative;
  z-index: 1;
}

/* ğŸ”§ æ–°è¦è¿½åŠ ï¼šæŠ˜ã‚ŠãŸãŸã¿ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.timeline-collapse-enter {
  opacity: 0;
  max-height: 0;
  overflow: hidden;
  transform: scaleY(0);
  transform-origin: top;
}

.timeline-collapse-enter-active {
  opacity: 1;
  max-height: 1000px;
  transform: scaleY(1);
  transition: all 0.3s ease-in-out;
}

.timeline-collapse-exit {
  opacity: 1;
  max-height: 1000px;
  transform: scaleY(1);
}

.timeline-collapse-exit-active {
  opacity: 0;
  max-height: 0;
  transform: scaleY(0);
  transition: all 0.3s ease-in-out;
  overflow: hidden;
}

/* ğŸ”§ æ–°è¦è¿½åŠ ï¼šãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆã‚¹ãƒ ãƒ¼ã‚ºåŒ– */
.timeline-theme-transition {
  transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, border-color 0.2s ease-in-out;
}

/* ğŸ”§ æ–°è¦è¿½åŠ ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã®ä½ç½®å›ºå®šå¼·åŒ– */
.timeline-project-name-sticky {
  position: sticky;
  z-index: 10;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.timeline-project-name-sticky::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: inherit;
  opacity: 0.9;
  z-index: -1;
}